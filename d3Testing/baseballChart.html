<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <title>D3 spike</title>
  <script src="https://d3js.org/d3.v4.min.js"></script>
</head>
<body>

  <div></div>


  <script>



  var data = [
  {year: 2000, HR: 14},
  {year: 2001, HR: 8},
  {year: 2002, HR: 18},
  {year: 2003, HR: 21},
  {year: 2004, HR: 28},
  {year: 2005, HR: 4},
  {year: 2006, HR: 16},
  {year: 2007, HR: 20},
  {year: 2008, HR: 13},
  {year: 2009, HR: 10},
  {year: 2010, HR: 18},
  {year: 2011, HR: 31},
  {year: 2012, HR: 26}
]

  var HRdata = data.map((d) => d.HR)

  var histogram = d3.histogram()
    .thresholds(5)
    (HRdata)

  const height = 500
  const width = 500


  var yScale = d3.scaleLinear()
    .domain([0, d3.max(histogram.map((d) => d.length))])
    .range([0, height - 20])



  var svg = d3.select('div')
    .append('svg')
    .attr('height', height)
    .attr('width', width)
    .style('border', '1px solid black')

  var groups = svg.selectAll('g')
    .data(histogram)
    .enter()
    .append('g')

  groups.append('rect')
    .attr('x', (d, i) => i * 60 + 20)
    .attr('y', (d) => height - yScale(d.length))
    .attr('width', (d, i) => 50)
    .attr('height', (d) => yScale(d.length))

  groups.append('text')
    .text((d) => d)



    console.log(histogram)









  </script>
</body>
</html>
